name: âš¡ Senpai's Blind Trust (Auto-Merge ALL)

on:
  pull_request_target:
    # PR aÃ§Ä±ldÄ±ÄŸÄ±nda, gÃ¼ncellendiÄŸinde veya tekrar aÃ§Ä±ldÄ±ÄŸÄ±nda tetiklenir
    types: [opened, synchronize, reopened]

jobs:
  instant-merge:
    name: ğŸï¸ HÄ±zlÄ± ve Ã–fkeli Merge
    runs-on: ubuntu-latest
    permissions:
      contents: write      # Kodu birleÅŸtirmek (yazmak) iÃ§in
      pull-requests: write # PR'Ä± onaylamak ve kapatmak iÃ§in

    steps:
      - name: ğŸ¤– Senpai Operasyona BaÅŸlÄ±yor
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          PR_URL: ${{ github.event.pull_request.html_url }}
        run: |
          echo "ğŸ Senpai: Bir PR tespit edildi! Kimin attÄ±ÄŸÄ± umurumda deÄŸil, iÃ§eri alÄ±yorum!"
          
          # AdÄ±m 1: Ã–nce PR'Ä± onayla (Approve) - BazÄ± branch korumalarÄ± onay ister
          gh pr review "$PR_URL" --approve --body "Senpai bu kodu beÄŸendi ve hiÃ§ okumadan onayladÄ±! ğŸš€"
          
          # AdÄ±m 2: Merge iÅŸlemini yap (Squash ile tek parÃ§a halinde)
          # --auto flag'i, eÄŸer check'ler bitmediyse bitmesini bekler sonra merge eder.
          # EÄŸer beklemeden hemen basmak istiyorsan --auto yerine direkt merge komutunu zorlarÄ±z ama --auto daha stabildir.
          gh pr merge "$PR_URL" --squash --delete-branch
          
          echo "âœ… Ä°ÅŸlem Tamam! Kod artÄ±k ana yapÄ±nÄ±n bir parÃ§asÄ±."
